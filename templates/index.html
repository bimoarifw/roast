<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoastMaster AI</title>
    <meta name="description"
        content="RoastMaster AI - Get brutally honest, savage roasts generated by AI. Enter a name and brace yourself for the merciless burn!">
    <meta name="keywords" content="roast, AI, comedy, insult, savage, funny, burn, comedian">
    <meta name="author" content="bimoarifw">
    <meta property="og:title" content="RoastMaster AI">
    <meta property="og:description" content="The ultimate AI-powered roast generator. Prepare for savage burns!">
    <meta property="og:image" content="/static/ogimage.png">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="RoastMaster AI">
    <meta name="twitter:description" content="The ultimate AI-powered roast generator. Prepare for savage burns!">
    <meta name="twitter:image" content="/static/ogimage.png">
    <link rel="canonical" href="https://roast.bimoarifw.me/">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="/static/css/semantic.min.css">

</head>

<body>
    <div class="ui container">
        <div class="ui stackable grid">
            <div class="sixteen wide column">
                <div class="ui center aligned basic segment">
                    <h1 class="ui massive icon header">
                        <i class="fire icon"></i>
                        <div class="content">
                            RoastMaster AI
                            <div class="sub header">Enter a name. Get it roasted.</div>
                        </div>
                    </h1>
                </div>

                <div class="ui warning message">
                    <div class="header"><i class="warning icon"></i> Beware !</div>
                    This AI's roasts are so diabolically savage, they'll shatter your fragile ego into a million pieces,
                    make you sob like a rejected toddler, and send you crawling back to mommy's basement, begging for
                    emotional bandaids. Proceed at your own risk, your tears will be our fuel!
                </div>

                <div class="ui fluid card">
                    <div class="content">
                        <div class="header">
                            <i class="user icon"></i>
                            Enter Your Name
                        </div>
                    </div>
                    <div class="content">
                        <form id="roast-form" class="ui large form">
                            <div class="field">
                                <div class="ui action input">
                                    <input type="text" id="name-input" name="name"
                                        placeholder="Enter a name (e.g., 'Budi')" required minlength="2" maxlength="50">
                                    <button class="ui primary button" type="submit">
                                        <i class="rocket icon"></i>
                                        Roast
                                    </button>
                                </div>
                            </div>
                            <div class="ui error message"></div>
                        </form>
                    </div>
                </div>

                <div class="ui fluid card">
                    <div class="content">
                        <div class="header">
                            <i class="comment icon"></i>
                            Result
                        </div>
                    </div>
                    <div class="content">
                        <div id="roast-placeholder" class="ui center aligned basic segment">
                            <p>Your result will appear here...</p>
                        </div>

                        <div id="result-card" class="ui fluid card" style="display: none;">
                            <div class="content">
                                <div class="description">
                                    <p id="roast-output"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ui center aligned basic segment">
                    <h4 class="ui horizontal divider header">
                        <i class="code icon"></i>
                        API Info
                    </h4>
                    <div class="ui action input">
                        <input type="text" id="api-endpoint-display" value="/api/" readonly>
                        <button class="ui icon button" id="copy-api-btn" data-tooltip="Copy Full API URL"
                            data-position="top right">
                            <i class="copy outline icon"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/semantic.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#copy-api-btn').popup();

            document.getElementById('result-card').style.display = 'none';

            document.getElementById('roast-form').addEventListener('submit', async function (event) {
                event.preventDefault();
                const name = document.getElementById('name-input').value;
                const button = this.querySelector('button');
                const resultCard = document.getElementById('result-card');
                const roastOutput = document.getElementById('roast-output');
                const placeholder = document.getElementById('roast-placeholder');

                button.classList.add('loading', 'disabled');

                if (resultCard.style.display === 'block') {
                    roastOutput.innerHTML = '<div class="ui active centered inline loader"></div><p style="margin-top: 1em;">Brewing a new roast...</p>';
                } else {
                    placeholder.innerHTML = '<div class="ui active centered inline loader"></div><p style="margin-top: 1em;">Brewing the perfect roast...</p>';
                }

                try {
                    const response = await fetch('/api/roast', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name: name })
                    });

                    const data = await response.json();
                    placeholder.style.display = 'none';
                    resultCard.style.display = 'block';
                    setTimeout(() => resultCard.classList.add('visible'), 50);

                    if (response.ok) {
                        roastOutput.textContent = data.roast;
                        placeholder.style.display = 'none';
                        if (resultCard.style.display !== 'block') {
                            resultCard.style.display = 'block';
                            setTimeout(() => resultCard.classList.add('visible'), 50);
                        }
                    } else {
                        roastOutput.textContent = `Error: ${data.detail || 'Something went wrong.'}`;
                        placeholder.style.display = 'none';
                        if (resultCard.style.display !== 'block') {
                            resultCard.style.display = 'block';
                            setTimeout(() => resultCard.classList.add('visible'), 50);
                        }
                    }
                } catch (error) {
                    roastOutput.textContent = 'Error: Could not connect to the server.';
                    placeholder.style.display = 'none';
                    if (resultCard.style.display !== 'block') {
                        resultCard.style.display = 'block';
                        setTimeout(() => resultCard.classList.add('visible'), 50);
                    }
                }

                button.classList.remove('loading', 'disabled');
            });

            document.getElementById('copy-api-btn').addEventListener('click', function () {
                const apiUrl = window.location.origin + '/api/';
                const button = this;
                const originalIcon = button.innerHTML;

                navigator.clipboard.writeText(apiUrl).then(function () {
                    button.innerHTML = '<i class="check green icon"></i>';
                    $(button).popup('destroy');
                    $(button).popup({
                        content: 'Copied!',
                        on: 'manual',
                        position: 'top right'
                    }).popup('show');

                    setTimeout(() => {
                        button.innerHTML = originalIcon;
                        $(button).popup('destroy');
                        $(button).popup({
                            content: 'Copy Full API URL',
                            position: 'top right'
                        });
                    }, 2000);
                }).catch(function (err) {
                    console.error('Failed to copy API URL: ', err);
                    $(button).popup('destroy');
                    $(button).popup({
                        content: 'Failed to copy!',
                        on: 'manual',
                        position: 'top right'
                    }).popup('show');

                    setTimeout(() => {
                        $(button).popup('destroy');
                        $(button).popup({
                            content: 'Copy Full API URL',
                            position: 'top right'
                        });
                    }, 2000);
                });
            });
        });
    </script>

    <div class="ui vertical footer segment ui large margin top" style="margin-top: 50px;">
        <div class="ui center aligned container">
            <div class="ui stackable grid">
                <div class="sixteen wide column">
                    <h4 class="ui header">RoastMaster</h4>
                    <p><span>Developed by <a href="https://bimoarifw.me" target="_blank">bimoarifw</a></span> |
                        <span>Powered by <a href="https://pollinations.ai/" target="_blank">Pollinations AI</a></span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>

</html>